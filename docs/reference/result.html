<html>
<head>
<link rel="stylesheet" type="text/css" href="../styles/rao_general.css">
<link rel="stylesheet" href="../styles/rao_highlight.css">
<meta http-equiv="Content-type" content="text/html; charset=utf-8"/>
<script src="../scripts/thirdparty/highlight.pack.js"></script>
<script>hljs.initHighlightingOnLoad();</script>
<script src="../scripts/thirdparty/jquery-2.1.4.min.js"></script>
<script src="../scripts/table_of_contents.js"></script>
</head>
<body>
<h2>Результаты</h2>
<p>Результаты (собираемые показатели) моделирования описываются с помощью ключевого слова <code class="rao">result</code>.</p>
<pre><code class="rao">result <i>имя_результата</i> = <i>тип_результата</i>(<i>параметры_результата</i>);</code></pre>
<p>Определены результаты пяти типов:</p>
<table style="width:100%">
    <tr>
        <th width="30%">Тип результата</th>
        <th width="70%">Описание</th>
    </tr>
    <tr>
        <td><pre><code class="rao">getValue(<i>арифметическое_выражение</i>)</code></pre></td>
        <td>Вычисление значения переданного в качестве параметра выражения в момент окончания моделирования.</td>
    </tr>
    <tr>
        <td><pre><code class="rao">watchParameter(<i>полное_имя_параметра_ресурса</i>)</code></pre></td>
        <td>Cбор статистических данных по изменению значения параметра ресурса.</td>
    </tr>
    <tr>
        <td><pre><code class="rao">watchState(<i>логическое_выражение</i>)</code></pre></td>
        <td>Cбор статистических данных по изменению состояния системы, описываемого логическим выражением.</td>
    </tr>
    <tr>
        <td><pre><code class="rao">watchQuantity(<i>имя_типа_ресурса</i>,
        <i>логическое_выражение</i>)</code></pre></td>
        <td>Cбор статистических данных по изменению количества ресурсов определенного типа, удовлетворяющих определенным условиям. Сбор статистики производится только по тем ресурсам, для которых значение логического выражения является истинным. Для сбора данных по всем ресурсам данного типа в качестве второго параметра следует указать ключевое слово <code class="rao">any</code>.</td>
    </tr>
    <tr>
        <td><pre><code class="rao">watchValue(<i>имя_типа_ресурса</i>,
        <i>логическое_выражение</i>,
        <i>арифметическое_выражение</i>)</code></pre></td>
        <td>Cбор статистических данных по произвольному арифметическому выражению. Сбор статистики происходит в момент уничтожения ресурса указанного типа, удовлетворяющего указанному условию.</td>
    </tr>
</table>
<p>Рассмотрим модель цеха металлообработки. Пусть ресурсы описываются следующим образом:</p>
<pre><code class="rao">enum Состояние_станка {свободен, загружается, готов_к_обработке,
        работает, разгружается, закончил_обработку, требует_переналадки, требует_ремонта}

enum Тип_заготовки {вал, диск, корпус}

type Цех {
    int число_активных_заказов;
}

type Станок {
    int номер;
    Состояние_станка состояние;
    double длительность_обработки;
    int деталей_обработано;
}

type Заготовка {
    int время_поступления;
    int время_окончания_обработки;
    int номер_заказа;
    Тип_заготовки тип;
}

resource цех = Цех.create(0);
resource станок_1 = Станок.create(1, Состояние_станка.Свободен, 20.0, 0);</code></pre>
<p>Тогда собираемые показатели:</p>
<pre><code class="rao">// Число деталей, обработанных первым станком на момент окончания моделирования
result обработано_на_станке_1 = getValue(станок_1.деталей_обработано);

// Загрузка станка
result станок_1_в_процессе_обработки = watchState(станок_1.состояние == Состояние_станка.работает);

// Количество активных заказов
result невыполненных_заказов = watchParameter(цех.число_активных_заказов);

// Количество всех заготовок
result заготовок_в_обработке = watchQuantity(Заготовка, any);

// Количество валов
result валов_в_обработке = watchQuantity(Заготовка, Заготовка.тип == Тип_заготовки.вал);

// Длительность обработки корпусов
result длительность_обработки_корпусов = watchValue(
        Заготовка,
        Заготовка.тип == Тип_заготовки.корпус,
        Заготовка.время_окончания_обработки - Заготовка.время_поступления);
</code></pre>
</body>
</html>
