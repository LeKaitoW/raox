<html>
<head>
<link rel="stylesheet" type="text/css" href="../styles/rao_general.css">
<link rel="stylesheet" href="../styles/rao_highlight.css">
<meta http-equiv="Content-type" content="text/html; charset=utf-8"/>
<script src="../scripts/thirdparty/highlight.pack.js"></script>
<script>hljs.initHighlightingOnLoad();</script>
<script src="../scripts/thirdparty/jquery-2.1.4.min.js"></script>
<script src="../scripts/table_of_contents.js"></script>
</head>
<body>
<h2>Анимация</h2>
<p>В модели может быть несколько кадров. В процессе прогона отображается выбранный из списка. Описание кадра анимации имеет следующий вид:</p>
<pre><code class="rao">frame <i>Имя_кадра</i> {
    def init() {
        <i>блок_инициализации</i>
    }

    def draw() {
        <i>тело_кадра</i>
    }

    // Уведомления от мыши
    def mouseDown(int x, int y, int button, int stateMask) {
    }
    def mouseUp(int x, int y, int button, int stateMask) {
    }
    def mouseMove(int x, int y, int button, int stateMask) {
    }
    def mouseDoubleClick(int x, int y, int button, int stateMask) {
    }
    def mouseScrolled(int x, int y, int count) {
    }

    // Уведомления от клавиатуры
    def keyReleased(int keyCode, int stateMask) {
    }
    def keyPressed(int keyCode, int stateMask) {
    }
}
</code></pre>
<h3>Блок инициализации</h3>
<p>Используется для задания фона и размеров фрейма:</p>
<pre><code class="rao">def init() {
    background = new Background(800, 600, RaoColor.WHITE)
}
</code></pre>

<h3>Тело кадра</h3>
<p>В теле кадра, с помощью процедурного языка и специальных функций для отрисовки, описывается изображение.</p>
<table style="width:100%">
    <tr>
        <th width="30%">Сигнатура</th>
        <th width="20%">Описание</th>
        <th width="50%">Параметры</th>
    </tr>
    <tr>
        <td><pre><code class="rao">new RaoColor(int r, int g, int b)

new RaoColor(int r, int g, int b, int alpha)</code></pre></td>
        <td>Создает цвет в модели <a href="https://ru.wikipedia.org/wiki/RGB">RGB</a></td>
        <td>
            <table style="width:100%">
                <tr>
                    <td width="20%"><code class="rao">r</code></td>
                    <td>интенсивность красного цвета в интервале от 0 до 255</td>
                </tr>
                <tr>
                    <td><code class="rao">g</code></td>
                    <td>интенсивность зеленого цвета в интервале от 0 до 255</td>
                </tr>
                <tr>
                    <td><code class="rao">b</code></td>
                    <td>интенсивность синего цвета от в интервале 0 до 255</td>
                </tr>
                <tr>
                    <td><code class="rao">alpha</code></td>
                    <td><a href="https://en.wikipedia.org/wiki/RGBA_color_space">прозрачность</a> в интервале от 0 до 255</td>
                </tr>
                <tr>
                    <td colspan="2">
                        <table style="windth:100%">
                            <tr>
                                <td colspan="2">Встроенные цвета</td>
                            </tr>
                            <tr>
                                <td width=50%>
<pre><code class="rao">RaoColor.WHITE
RaoColor.BLUE
RaoColor.CYAN
RaoColor.GRAY
RaoColor.GREEN
RaoColor.MAGENTA
RaoColor.RED
RaoColor.YELLOW
</code></pre>
                                </td>
                                <td>
<pre><code class="rao">RaoColor.BLACK
RaoColor.DARK_BLUE
RaoColor.DARK_CYAN
RaoColor.DARK_GRAY
RaoColor.DARK_GREEN
RaoColor.DARK_MAGENTA
RaoColor.DARK_RED
RaoColor.DARK_YELLOW
</code></pre>
                                </td>
                            </tr>
                        </table>
                    </td>
                </tr>
            </table>
        </td>
    </tr>
    <tr>
        <td><pre><code class="rao">new Background(int width, int height, RaoColor color)</code></pre></td>
        <td>Определяет фона кадра. Должна вызываться в <code class="rao">init()</code>.</td>
        <td>
            <table style="width:100%">
                <tr>
                    <td width="20%"><code class="rao">width</code></td>
                    <td>ширина кадра</td>
                </tr>
                <tr>
                    <td><code class="rao">height</code></td>
                    <td>высота кадра</td>
                </tr>
                <tr>
                    <td><code class="rao">color</code></td>
                    <td>цвет кадра</td>
                </tr>
            </table>
        </td>
    </tr>
    <tr>
        <td><pre><code class="rao">drawText(String text, int x, int y)

drawText(String text, int x, int y,
  RaoColor color)

drawText(String text, int x, int y,
  RaoColor color, int width, Alignment alignment)</code></pre></td>
        <td>Выводит текст<br><img src="https://github.com/aurusov/raox-models/blob/master/tutorial/animation/draw_text/screenshots/draw_text.gif?raw=true"/><br><a href="https://github.com/aurusov/raox-models/tree/master/tutorial/animation/draw_text">скачать</a></td>
        <td>
            <table style="width:100%">
                <tr>
                    <td width="20%"><code class="rao">text</code></td>
                    <td>текст</td>
                </tr>
                <tr>
                    <td><code class="rao">x</code></td>
                    <td>координата <code>x</code> верхнего левого угла панели текста</td>
                </tr>
                <tr>
                    <td><code class="rao">y</code></td>
                    <td>координата <code>y</code> верхнего левого угла панели текста</td>
                </tr>
                <tr>
                    <td><code class="rao">color</code></td>
                    <td>цвет текста</td>
                </tr>
                <tr>
                    <td><code class="rao">width</code></td>
                    <td>ширина панели текста, по которой производится выравнивание</td>
                </tr>
                <tr>
                    <td><code class="rao">alignment</code></td>
                    <td>выравнивание текста в панели, задается одним из значений <pre><code class="rao">Alignment.LEFT
Alignment.RIGHT
Alignment.CENTER</code></pre></td>
                </tr>
            </table>
        </td>
    </tr>
    <tr>
        <td><pre><code class="rao">drawLine(int x1, int y1, int x2, int y2)

drawLine(int x1, int y1, int x2, int y2,
  RaoColor color)</code></pre></td>
        <td>Выводит отрезок<br><img src="https://github.com/aurusov/raox-models/blob/master/tutorial/animation/draw_line/screenshots/draw_line.gif?raw=true"/><br><a href="https://github.com/aurusov/raox-models/tree/master/tutorial/animation/draw_line">скачать</a></td>
        <td>
            <table style="width:100%">
                <tr>
                    <td width="20%"><code class="rao">x1</code></td>
                    <td>координата <code>x</code> первой точки отрезка</td>
                </tr>
                <tr>
                    <td><code class="rao">y1</code></td>
                    <td>координата <code>y</code> первой точки отрезка</td>
                </tr>
                <tr>
                    <td><code class="rao">x2</code></td>
                    <td>координата <code>x</code> второй точки отрезка</td>
                </tr>
                <tr>
                    <td><code class="rao">y2</code></td>
                    <td>координата <code>y</code> второй точки отрезка</td>
                </tr>
                <tr>
                    <td><code class="rao">color</code></td>
                    <td>цвет отрезка</td>
                </tr>
            </table>
        </td>
    </tr>
    <tr>
        <td><pre><code class="rao">drawRectangle(int x, int y,
  int width, int height)

drawRectangle(int x, int y,
  int width, int height,
  RaoColor fillColor,
  RaoColor borderColor)</code></pre></td>
        <td>Выводит прямоугольник<br><img src="https://github.com/aurusov/raox-models/blob/master/tutorial/animation/draw_rectangle/screenshots/draw_rectangle.gif?raw=true"/><br><a href="https://github.com/aurusov/raox-models/tree/master/tutorial/animation/draw_rectangle">скачать</a></td>
        <td>
            <table style="width:100%">
                <tr>
                    <td width="20%"><code class="rao">x</code></td>
                    <td>координата <code>x</code> левой верхней точки прямоугольника</td>
                </tr>
                <tr>
                    <td><code class="rao">y</code></td>
                    <td>координата <code>y</code> левой верхней точки прямоугольника</td>
                </tr>
                <tr>
                    <td><code class="rao">width</code></td>
                    <td>ширина прямоугольника</td>
                </tr>
                <tr>
                    <td><code class="rao">height</code></td>
                    <td>высота прямоугольника</td>
                </tr>
                <tr>
                    <td><code class="rao">fillColor</code></td>
                    <td>цвет фона прямоугольника</td>
                </tr>
                <tr>
                    <td><code class="rao">borderColor</code></td>
                    <td>цвет границы прямоугольника</td>
                </tr>
            </table>
        </td>
    </tr>
    <tr>
        <td><pre><code class="rao">drawTriangle(int x1, int y1,
  int x2, int y2,
  int x3, int y3)

drawTriangle(int x1, int y1,
  int x2, int y2,
  int x3, int y3,
  RaoColor fillColor, RaoColor borderColor)</code></pre></td>
        <td>Выводит треугольник<br><img src="https://github.com/aurusov/raox-models/blob/master/tutorial/animation/draw_triangle/screenshots/draw_triangle.gif?raw=true"/><br><a href="https://github.com/aurusov/raox-models/tree/master/tutorial/animation/draw_triangle">скачать</a></td>
        <td>
            <table style="width:100%">
                <tr>
                    <td width="20%"><code class="rao">x1</code></td>
                    <td>координата <code>x</code> первой вершины треугольника</td>
                </tr>
                <tr>
                    <td><code class="rao">y1</code></td>
                    <td>координата <code>y</code> первой вершины треугольника</td>
                </tr>
                <tr>
                    <td><code class="rao">x2</code></td>
                    <td>координата <code>x</code> второй вершины треугольника</td>
                </tr>
                <tr>
                    <td><code class="rao">y2</code></td>
                    <td>координата <code>y</code> второй вершины треугольника</td>
                </tr>
                <tr>
                    <td><code class="rao">x3</code></td>
                    <td>координата <code>x</code> третьей вершины треугольника</td>
                </tr>
                <tr>
                    <td><code class="rao">y3</code></td>
                    <td>координата <code>y</code> третьей вершины треугольника</td>
                </tr>
                <tr>
                    <td><code class="rao">fillColor</code></td>
                    <td>цвет фона треугольника</td>
                </tr>
                <tr>
                    <td><code class="rao">borderColor</code></td>
                    <td>цвет границы треугольника</td>
                </tr>
            </table>
        </td>
    </tr>
    <tr>
        <td><pre><code class="rao">drawCircle(int x, int y, int radius)

drawCircle(int x, int y, int radius,
  RaoColor fillColor, RaoColor borderColor)</code></pre></td>
        <td>Выводит круг<br><img src="https://github.com/aurusov/raox-models/blob/master/tutorial/animation/draw_circle/screenshots/draw_circle.gif?raw=true"/><br><a href="https://github.com/aurusov/raox-models/tree/master/tutorial/animation/draw_circle">скачать</a></td>
        <td>
            <table style="width:100%">
                <tr>
                    <td width="20%"><code class="rao">x</code></td>
                    <td>координата <code>x</code> центра круга</td>
                </tr>
                <tr>
                    <td><code class="rao">y</code></td>
                    <td>координата <code>y</code> центра круга</td>
                </tr>
                <tr>
                    <td><code class="rao">radius</code></td>
                    <td>радиус круга</td>
                </tr>
                <tr>
                    <td><code class="rao">fillColor</code></td>
                    <td>цвет фона круга</td>
                </tr>
                <tr>
                    <td><code class="rao">borderColor</code></td>
                    <td>цвет границы круга</td>
                </tr>
            </table>
        </td>
    </tr>
    <tr>
        <td><pre><code class="rao">drawEllipse(int x, int y,
  int width, int height)

drawEllipse(int x, int y,
  int width, int height,
  RaoColor fillColor, RaoColor borderColor)</code></pre></td>
        <td>Выводит эллипс<br><img src="https://github.com/aurusov/raox-models/blob/master/tutorial/animation/draw_ellipse/screenshots/draw_ellipse.gif?raw=true"/><br><a href="https://github.com/aurusov/raox-models/tree/master/tutorial/animation/draw_ellipse">скачать</a></td>
        <td>
            <table style="width:100%">
                <tr>
                    <td width="20%"><code class="rao">x</code></td>
                    <td>координата <code>x</code> левого верхнего угла прямоугольника, в который вписан эллипс</td>
                </tr>
                <tr>
                    <td><code class="rao">y</code></td>
                    <td>координата <code>y</code> левого верхнего угла прямоугольника, в который вписан эллипс</td>
                </tr>
                <tr>
                    <td><code class="rao">width</code></td>
                    <td>длина горизонтальной оси эллипса</td>
                </tr>
                <tr>
                    <td><code class="rao">height</code></td>
                    <td>длина вертикальной оси эллипса</td>
                </tr>
                <tr>
                    <td><code class="rao">fillColor</code></td>
                    <td>цвет фона эллипса</td>
                </tr>
                <tr>
                    <td><code class="rao">borderColor</code></td>
                    <td>цвет границы эллипса</td>
                </tr>
            </table>
        </td>
    </tr>
    <tr>
        <td><pre><code class="rao">drawImage(String name,
  int x, int y)

drawImage(String name,
  int destX, int destY,
  int destWidth, int destHeight)

drawImage(String name,
  int srcX, int srcY,
  int srcWidth, int srcHeight,
  int destX, int destY,
  int destWidth, int destHeight)</code></pre></td>
        <td>Выводит изображение<br><img src="https://github.com/aurusov/raox-models/blob/master/tutorial/animation/bird/screenshots/bird.gif?raw=true"/><br><a href="https://github.com/aurusov/raox-models/tree/master/tutorial/animation/bird">скачать</a></td>
        <td>
            <table style="width:100%">
                <tr>
                    <td width="20%"><code class="rao">name</code></td>
                    <td>имя файла</td>
                </tr>
                <tr>
                    <td width="20%"><code class="rao">x</code></td>
                    <td>координата <code>x</code> левого верхнего угла изображения</td>
                </tr>
                <tr>
                    <td><code class="rao">y</code></td>
                    <td>координата <code>y</code> левого верхнего угла изображения</td>
                </tr>
                <tr>
                    <td>
<code>srcX</code><br>
<code>srcY</code><br>
<code>srcWidth</code><br>
<code>srcHeight</code></td>
                    <td>часть исходного изображения</td>
                </tr>
                <tr>
                    <td>
<code>destX</code><br>
<code>destY</code><br>
<code>destWidth</code><br>
<code>destHeight</code></td>
                    <td>прямоугольная область на экране</td>
                </tr>
            </table>
        </td>
    </tr>
</table>

<h3>Пример, <a href="https://github.com/aurusov/raox-models/tree/master/tutorial/animation/whos_that">скачать</a></h3>
<pre><code class="rao">event Timer() {
    Timer.plan(currentTime + 1)
}

def init() {
    Timer.plan(currentTime + 1)
}

def terminateCondition() {
    return currentTime &gt;= 200
}

frame WhosThat {
    def init() {
        background = new Background(300, 300, RaoColor.WHITE)
    }

    def draw() {
        val dy = Math.abs(4 - currentTime % 8) as int
        val dx = Math.abs(8 - currentTime % 16) as int
        val bodyColor = new RaoColor(255, 153, 188)
        val mouthColor = new RaoColor(242, 245, 207)

        /* tail */
        drawTriangle(255 + dx, 170 + dy, 290, 40 + dy, 200, 150 + dy, bodyColor, bodyColor)
        drawLine(255 + dx, 170 + dy, 290, 40 + dy, RaoColor.BLACK)

        drawTriangle(100 + dx, 20 + dy, 290, 40 + dy, 275, 75 + dy, bodyColor, bodyColor)
        drawTriangle(100 + dx, 20 + dy, 140, 24 + dy, 130, 30 + dy, RaoColor.WHITE, RaoColor.WHITE)
        drawLine(100 + dx, 20 + dy, 290, 40 + dy, RaoColor.BLACK)
        drawLine(100 + dx, 20 + dy, 265, 72 + dy, RaoColor.BLACK)

        drawTriangle(250 + dx, 220 + dy, 270, 40 + dy, 200, 150 + dy, bodyColor, bodyColor)
        drawLine(250 + dx, 68 + dy, 220, 120 + dy, RaoColor.BLACK)

        /* right back leg */
        drawTriangle(220 + dx, 220 + dy, 245 + dx, 255 + dy, 260, 183 + dy, bodyColor, bodyColor)

        /* body */
        drawEllipse(30 + dx, 100 + dy, 230, 150, bodyColor, RaoColor.BLACK)

        /* right back leg partially-behind effect */
        drawTriangle(240 + dx, 220 + dy, 245 + dx, 255 + dy, 260, 183 + dy, bodyColor, bodyColor)
        drawTriangle(233 + dx, 243 + dy, 245 + dx, 255 + dy, 255, 245 + dy, RaoColor.WHITE, RaoColor.WHITE)
        drawLine(226 + dx, 228 + dy, 245 + dx, 255 + dy, RaoColor.BLACK)
        drawLine(245 + dx * 2, 255 + dy, 260, 183 + dy, RaoColor.BLACK)

        /* left ear */
        drawCircle(35 + dx, 150 + dy, 40, bodyColor, RaoColor.BLACK)

        /* head */
        drawEllipse(7 + dx, 127 + dy, 135, 125, bodyColor, RaoColor.BLACK)

        /* right ear */
        drawCircle(120 + dx, 150 + dy, 40, bodyColor, RaoColor.BLACK)
        drawCircle(120 + dx, 150 + dy, 20, bodyColor, RaoColor.BLACK)

        /* left eye */
        drawCircle(23 + dx, 180 + dy, 30, RaoColor.WHITE, RaoColor.BLACK)
        drawCircle(28 + dx, 180 + dy, 2, RaoColor.BLACK, RaoColor.BLACK)

        /* right eye */
        drawCircle(80 + dx, 180 + dy, 30, RaoColor.WHITE, RaoColor.BLACK)
        drawCircle(78 + dx, 180 + dy, 2, RaoColor.BLACK, RaoColor.BLACK)

        /* left front leg */
        drawTriangle(10 + dx, 225 + dy, 1 - dx, 265 + dy, 80, 225 + dy, bodyColor, bodyColor)
        drawTriangle(0 + dx, 255 + dy, 1 - dx, 265 + dy, 15, 258 + dy, RaoColor.WHITE, RaoColor.WHITE)
        drawLine(10 + dx, 225 + dy, 1 - dx, 265 + dy, RaoColor.BLACK)
        drawLine(1, 265 + dy, 80, 225 + dy, RaoColor.BLACK)

        /* mouth area */
        drawEllipse(1 + dx, 188 + dy, 100, 70, mouthColor, RaoColor.BLACK)
        drawTriangle(10 + dx, 225 + dy, 45, 250 + dy, 70, 225 + dy, bodyColor, RaoColor.BLACK)

        /* nose */
        drawLine(20 + dx, 214 + dy, 27, 217 + dy, RaoColor.BLACK)
        drawLine(38 + dx, 217 + dy, 44, 214 + dy, RaoColor.BLACK)

        /* teeth */
        drawTriangle(15 + dx, 225 + dy, 20 + dx, 230 + dy, 25 + dx, 225 + dy, RaoColor.WHITE, RaoColor.BLACK)
        drawTriangle(50 + dx, 225 + dy, 55 + dx, 230 + dy, 60 + dx, 225 + dy, RaoColor.WHITE, RaoColor.BLACK)

        /* right front leg */
        drawTriangle(135 + dx, 240 + dy, 170 + dx, 275 + dy, 175, 225 + dy, bodyColor, bodyColor)
        drawTriangle(159 + dx, 265 + dy, 170 + dx, 275 + dy, 176, 260 + dy, RaoColor.WHITE, RaoColor.WHITE)
        drawLine(135 + dx, 240 + dy, 170 + dx, 275 + dy, RaoColor.BLACK)
        drawLine(175 + dx, 225 + dy, 170 + dx, 275 + dy, RaoColor.BLACK)
    }
}
</code></pre>
<img src="https://github.com/aurusov/raox-models/blob/master/tutorial/animation/whos_that/screenshots/whos_that.gif?raw=true" alt="WhosThat"/>
<h3>Уведомления от мыши и клавиатуры</h3>
<ul>
	<li>
		<a href="http://help.eclipse.org/neon/index.jsp?topic=%2Forg.eclipse.platform.doc.isv%2Freference%2Fapi%2Forg%2Feclipse%2Fswt%2Fevents%2FMouseEvent.html&anchor=field.summary">описание</a> параметров мыши
<pre><code class="rao">def mouseDown       (int x, int y, int button, int stateMask)
def mouseUp         (int x, int y, int button, int stateMask)
def mouseMove       (int x, int y, int button, int stateMask)
def mouseDoubleClick(int x, int y, int button, int stateMask)
def mouseScrolled   (int x, int y, int count)
</code></pre>
	</li>
	<li>
		<a href="http://help.eclipse.org/neon/index.jsp?topic=%2Forg.eclipse.platform.doc.isv%2Freference%2Fapi%2Forg%2Feclipse%2Fswt%2Fevents%2FKeyEvent.html&anchor=field.summary">описание</a> параметров клавиатуры
<pre><code class="rao">def keyReleased(int keyCode, int stateMask)
def keyPressed (int keyCode, int stateMask)
</code></pre>
	</li>
</ul>
<h3>Пример, <a href="https://github.com/aurusov/raox-models/tree/master/tutorial/animation/bird">скачать</a></h3>
<pre><code class="rao">constant bg_forest_b_width = 1280
constant bg_forest_b_height = 381
constant bg_forest_c_height = 360
constant width = bg_forest_b_width
constant height = bg_forest_b_height

type Sprite {
    int bg_forest_b_left
    int bg_forest_c_left
    int bird_x
    int bird_y
    String bird_sprite_image
}

type Mouse {
    boolean down
    int x
    int y
}

sequence birdSpriteNames = new Values(
    #["img/bird/frame-1.png", "img/bird/frame-2.png", "img/bird/frame-3.png", "img/bird/frame-4.png",
        "img/bird/frame-5.png", "img/bird/frame-6.png", "img/bird/frame-7.png", "img/bird/frame-8.png"])
sequence bird_dx = new Uniform(123456789, -1, 1)

resource sprite = Sprite.create(0, 0, 100, 20, birdSpriteNames.next())
resource mouse = Mouse.create(false, 0, 0)

int sign(int value) {
    if (value == 0)
        return 0
    else if (value &gt; 0)
        return 1
    else
        return -1
}

event Timer() {
    if (sprite.bg_forest_b_left &lt;= 0)
        sprite.bg_forest_b_left = width
    else
        sprite.bg_forest_b_left = sprite.bg_forest_b_left - 1

    if (sprite.bg_forest_c_left &lt;= 0)
        sprite.bg_forest_c_left = width
    else
        sprite.bg_forest_c_left = sprite.bg_forest_c_left - 2

    val bird_dx_current = bird_dx.next()
    if (bird_dx_current &gt; 0.3)
        sprite.bird_y = sprite.bird_y + 1
    else if (bird_dx_current &lt; -0.3)
        sprite.bird_y = sprite.bird_y - 1

    if (mouse.down) {
        sprite.bird_x = sprite.bird_x + sign(mouse.x - sprite.bird_x)
        sprite.bird_y = sprite.bird_y + sign(mouse.y - sprite.bird_y)
    }

    if (sprite.bird_x &lt; 0)
        sprite.bird_x = 0
    if (sprite.bird_x &gt; 200)
        sprite.bird_x = 200
    if (sprite.bird_y &lt; 0)
        sprite.bird_y = 0
    if (sprite.bird_y &gt; 100)
        sprite.bird_y = 100

    if (currentTime % 3 == 0)
        sprite.bird_sprite_image = birdSpriteNames.next()

    Timer.plan(currentTime + 1)
}

def init() {
    Timer.plan(currentTime + 1)
}

def terminateCondition() {
    return currentTime &gt;= 1000000
}

frame Bird {
    def init() {
        background = new Background(width, height, new RaoColor(206, 230, 207))
    }

    def draw() {
        drawImage("img/background/bg_forest_b.png", 0, 0, width - sprite.bg_forest_b_left, bg_forest_b_height,
            sprite.bg_forest_b_left, 0, width - sprite.bg_forest_b_left, bg_forest_b_height)
        drawImage("img/background/bg_forest_b.png", width - sprite.bg_forest_b_left, 0, sprite.bg_forest_b_left,
            bg_forest_b_height, 0, 0, sprite.bg_forest_b_left + 1, bg_forest_b_height)

        drawImage(sprite.bird_sprite_image, sprite.bird_x, sprite.bird_y, 50, 34)

        drawImage("img/background/bg_forest_c.png", 0, 0, width - sprite.bg_forest_c_left, bg_forest_c_height,
            sprite.bg_forest_c_left, height - bg_forest_c_height, width - sprite.bg_forest_c_left, bg_forest_c_height)
        drawImage("img/background/bg_forest_c.png", width - sprite.bg_forest_c_left, 0, sprite.bg_forest_c_left,
            bg_forest_c_height, 0, height - bg_forest_c_height, sprite.bg_forest_c_left + 1, bg_forest_c_height)
    }

    def mouseDown(int x, int y, int button, int stateMask) {
        mouse.down = true
    }

    def mouseUp(int x, int y, int button, int stateMask) {
        mouse.down = false
    }

    def mouseMove(int x, int y, int button, int stateMask) {
        mouse.x = x
        mouse.y = y
    }

    def keyPressed(int keyCode, int stateMask) {
        switch (keyCode) {
            case (1 &lt;&lt; 24) + 1: {
                mouse.down = true
                mouse.x = sprite.bird_x
                mouse.y = sprite.bird_y - 100
            }
            case (1 &lt;&lt; 24) + 2: {
                mouse.down = true
                mouse.x = sprite.bird_x
                mouse.y = sprite.bird_y + 100
            }
            case (1 &lt;&lt; 24) + 3: {
                mouse.down = true
                mouse.x = sprite.bird_x - 100
                mouse.y = sprite.bird_y
            }
            case (1 &lt;&lt; 24) + 4: {
                mouse.down = true
                mouse.x = sprite.bird_x + 100
                mouse.y = sprite.bird_y
            }
        }
    }

    def keyReleased(int keyCode, int stateMask) {
        switch (keyCode) {
            case (1 &lt;&lt; 24) + 1,
            case (1 &lt;&lt; 24) + 2,
            case (1 &lt;&lt; 24) + 3,
            case (1 &lt;&lt; 24) + 4:
                mouse.down = false
        }
    }
}
</code></pre>
<img src="https://github.com/aurusov/raox-models/blob/master/tutorial/animation/bird/screenshots/bird.gif?raw=true" alt="bird"/>
</body>
</html>
